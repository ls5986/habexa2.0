import{t as $,v as B,r as u,w as Q,_ as G,ad as te,ag as ne,x as f,j as e,y as _,z as D,E as U,a3 as X,ah as J,ai as ie,af as A,aj as le,ak as ce,al as de,am as ue,u as pe,an as xe,a0 as me,ab as he,B as p,T as l,C as N,b as M,q as P,a as z,h as j,Z as fe,a7 as ge,a8 as ye,a9 as je,aa as T,O as be,d as O,D as ve,e as Ce}from"./index-DJeRhYJi.js";import{h as Re}from"./errorHandler-l0UVzPhu.js";import{F as V}from"./FormControlLabel-jah7zOCe.js";import{S as ke}from"./SwitchBase-LM0WE4No.js";import{R as q}from"./refresh-cw-BFMFwtxT.js";import{D as Ie}from"./dollar-sign-CRcgrrIV.js";import{E as Se}from"./external-link-DArXF2mN.js";import"./useThemeProps-CpAx3BOw.js";function we(o){return $("MuiFormGroup",o)}B("MuiFormGroup",["root","row","error"]);const _e=["className","row"],ze=o=>{const{classes:r,row:t,error:a}=o;return U({root:["root",t&&"row",a&&"error"]},we,r)},Ae=_("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:t}=o;return[r.root,t.row&&r.row]}})(({ownerState:o})=>f({display:"flex",flexDirection:"column",flexWrap:"wrap"},o.row&&{flexDirection:"row"})),Fe=u.forwardRef(function(r,t){const a=Q({props:r,name:"MuiFormGroup"}),{className:c,row:x=!1}=a,b=G(a,_e),v=te(),m=ne({props:a,muiFormControl:v,states:["error"]}),g=f({},a,{row:x,error:m.error}),C=ze(g);return e.jsx(Ae,f({className:D(C.root,c),ownerState:g,ref:t},b))}),Ne=X(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Me=X(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Pe=_("span",{name:"MuiRadioButtonIcon",shouldForwardProp:J})({position:"relative",display:"flex"}),$e=_(Ne,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Be=_(Me,{name:"MuiRadioButtonIcon"})(({theme:o,ownerState:r})=>f({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}));function K(o){const{checked:r=!1,classes:t={},fontSize:a}=o,c=f({},o,{checked:r});return e.jsxs(Pe,{className:t.root,ownerState:c,children:[e.jsx($e,{fontSize:a,className:t.background,ownerState:c}),e.jsx(Be,{fontSize:a,className:t.dot,ownerState:c})]})}const ee=u.createContext(void 0);function Ge(){return u.useContext(ee)}function De(o){return $("MuiRadio",o)}const L=B("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Ue=["checked","checkedIcon","color","icon","name","onChange","size","className"],We=o=>{const{classes:r,color:t,size:a}=o,c={root:["root",`color${A(t)}`,a!=="medium"&&`size${A(a)}`]};return f({},r,U(c,De,r))},Ee=_(ke,{shouldForwardProp:o=>J(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:t}=o;return[r.root,t.size!=="medium"&&r[`size${A(t.size)}`],r[`color${A(t.color)}`]]}})(({theme:o,ownerState:r})=>f({color:(o.vars||o).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:o.vars?`rgba(${r.color==="default"?o.vars.palette.action.activeChannel:o.vars.palette[r.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:le(r.color==="default"?o.palette.action.active:o.palette[r.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},r.color!=="default"&&{[`&.${L.checked}`]:{color:(o.vars||o).palette[r.color].main}},{[`&.${L.disabled}`]:{color:(o.vars||o).palette.action.disabled}}));function Te(o,r){return typeof r=="object"&&r!==null?o===r:String(o)===String(r)}const Z=e.jsx(K,{checked:!0}),H=e.jsx(K,{}),Y=u.forwardRef(function(r,t){var a,c;const x=Q({props:r,name:"MuiRadio"}),{checked:b,checkedIcon:v=Z,color:m="primary",icon:g=H,name:C,onChange:s,size:h="medium",className:R}=x,k=G(x,Ue),S=f({},x,{color:m,size:h}),I=We(S),y=Ge();let i=b;const F=ie(s,y&&y.onChange);let w=C;return y&&(typeof i>"u"&&(i=Te(y.value,x.value)),typeof w>"u"&&(w=y.name)),e.jsx(Ee,f({type:"radio",icon:u.cloneElement(g,{fontSize:(a=H.props.fontSize)!=null?a:h}),checkedIcon:u.cloneElement(v,{fontSize:(c=Z.props.fontSize)!=null?c:h}),ownerState:S,classes:I,name:w,checked:i,onChange:F,ref:t,className:D(I.root,R)},k))});function Oe(o){return $("MuiRadioGroup",o)}B("MuiRadioGroup",["root","row","error"]);const Ve=["actions","children","className","defaultValue","name","onChange","value"],qe=o=>{const{classes:r,row:t,error:a}=o;return U({root:["root",t&&"row",a&&"error"]},Oe,r)},Le=u.forwardRef(function(r,t){const{actions:a,children:c,className:x,defaultValue:b,name:v,onChange:m,value:g}=r,C=G(r,Ve),s=u.useRef(null),h=qe(r),[R,k]=ce({controlled:g,default:b,name:"RadioGroup"});u.useImperativeHandle(a,()=>({focus:()=>{let i=s.current.querySelector("input:not(:disabled):checked");i||(i=s.current.querySelector("input:not(:disabled)")),i&&i.focus()}}),[]);const S=de(t,s),I=ue(v),y=u.useMemo(()=>({name:I,onChange(i){k(i.target.value),m&&m(i,i.target.value)},value:R}),[I,m,k,R]);return e.jsx(ee.Provider,{value:y,children:e.jsx(Fe,f({role:"radiogroup",ref:S,className:D(h.root,x)},C,{children:c}))})}),oo=()=>{const o=pe(),[r,t]=u.useState("single"),[a,c]=u.useState(""),[x,b]=u.useState(""),[v,m]=u.useState(1),[g,C]=u.useState(""),[s,h]=u.useState(null),[R,k]=u.useState(null),{analyzeSingle:S,loading:I}=xe(),{suppliers:y}=me(),{showToast:i}=he(),F=async()=>{var n,W,E;if(!a||!x){i("Please enter ASIN and buy cost","error");return}h(null),k(null);try{const d=await S(a,parseFloat(x),v,g||null);if(d.job_id){i("Analysis started! Check Products page for results.","info");return}d.asin||d.product_id?(h(d),i("Analysis complete!","success")):(h({asin:d.asin||a,title:d.title||d.product_title||"Product Analysis",roi:d.roi||((n=d.analysis)==null?void 0:n.roi)||0,net_profit:d.net_profit||((W=d.analysis)==null?void 0:W.net_profit)||0,deal_score:d.deal_score||((E=d.analysis)==null?void 0:E.deal_score)||null,gating_status:d.gating_status||"unknown",meets_threshold:d.meets_threshold||!1}),i("Analysis complete!","success"))}catch(d){const ae=Re(d,i);k(ae)}},w=()=>{h(null),k(null),c(""),b(""),m(1),C("")},oe=()=>{s!=null&&s.asin?o(`/products?asin=${s.asin}`):s!=null&&s.product_id?o(`/products?product_id=${s.product_id}`):o("/products")},se=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(n||0),re=n=>!n&&n!==0?"N/A":`${n>=0?"+":""}${n.toFixed(1)}%`;return e.jsxs(p,{children:[e.jsx(l,{variant:"h4",fontWeight:700,mb:1,children:"Analyze Products"}),e.jsx(l,{variant:"body1",color:"text.secondary",mb:4,children:"Enter an ASIN to get instant profitability analysis"}),e.jsx(N,{sx:{mb:4},children:e.jsx(M,{children:e.jsxs(p,{display:"flex",flexDirection:"column",gap:3,children:[e.jsxs(Le,{value:r,onChange:n=>t(n.target.value),row:!0,children:[e.jsx(V,{value:"single",control:e.jsx(Y,{}),label:"Single ASIN"}),e.jsx(V,{value:"bulk",control:e.jsx(Y,{}),label:"Bulk Analysis"})]}),e.jsxs(p,{display:"flex",gap:2,children:[e.jsx(P,{fullWidth:!0,label:"ASIN",placeholder:"B08XYZ1234",value:a,onChange:n=>c(n.target.value.toUpperCase()),sx:{fontFamily:"monospace"},disabled:!!s}),e.jsx(z,{variant:"contained",startIcon:e.jsx(fe,{size:16}),onClick:F,disabled:I||!a||!x||!!s,sx:{backgroundColor:j.purple.main,"&:hover":{backgroundColor:j.purple.dark},minWidth:150},children:I?"Analyzing...":"Analyze"})]}),e.jsxs(p,{display:"flex",gap:2,children:[e.jsx(P,{label:"Your Cost",type:"number",value:x,onChange:n=>b(n.target.value),InputProps:{startAdornment:"$"},sx:{flex:1},disabled:!!s}),e.jsx(P,{label:"MOQ",type:"number",value:v,onChange:n=>m(parseInt(n.target.value)||1),sx:{flex:1},disabled:!!s}),e.jsxs(ge,{sx:{flex:1},children:[e.jsx(ye,{children:"Supplier"}),e.jsxs(je,{value:g,label:"Supplier",onChange:n=>C(n.target.value),disabled:!!s,children:[e.jsx(T,{value:"",children:"None"}),y.map(n=>e.jsx(T,{value:n.id,children:n.name},n.id))]})]})]})]})})}),R&&e.jsx(N,{sx:{mb:4,borderColor:"error.main",border:1},children:e.jsxs(M,{children:[e.jsxs(be,{severity:"error",sx:{mb:2},children:[e.jsx(l,{variant:"body1",fontWeight:600,children:"Analysis Failed"}),e.jsx(l,{variant:"body2",mt:1,children:R})]}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(q,{size:16}),onClick:w,children:"Try Again"})]})}),s&&e.jsx(N,{sx:{mb:4,borderColor:s.roi>=30?"success.main":s.roi>0?"warning.main":"error.main",border:2},children:e.jsxs(M,{children:[e.jsxs(p,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(l,{variant:"h5",fontWeight:700,children:"Analysis Results"}),e.jsx(O,{label:s.roi>=30?"Highly Profitable":s.roi>0?"Profitable":"Unprofitable",color:s.roi>=30?"success":s.roi>0?"warning":"error",sx:{fontWeight:600}})]}),e.jsx(ve,{sx:{my:2}}),e.jsxs(p,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(p,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",mb:.5,children:"Product Title"}),e.jsx(l,{variant:"body1",fontWeight:600,children:s.title||"N/A"})]}),e.jsxs(p,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",mb:.5,children:"ASIN"}),e.jsx(l,{variant:"body1",fontFamily:"monospace",fontWeight:600,children:s.asin||"N/A"})]}),e.jsxs(p,{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2,mt:2,children:[e.jsxs(p,{sx:{p:2,borderRadius:2,bgcolor:"background.paper",border:"1px solid",borderColor:"divider"},children:[e.jsxs(p,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Ce,{size:20,color:s.roi>=30?j.success.main:s.roi>0?j.warning.main:j.error.main}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"ROI"})]}),e.jsx(l,{variant:"h4",fontWeight:700,color:s.roi>=30?"success.main":s.roi>0?"warning.main":"error.main",children:re(s.roi)})]}),e.jsxs(p,{sx:{p:2,borderRadius:2,bgcolor:"background.paper",border:"1px solid",borderColor:"divider"},children:[e.jsxs(p,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Ie,{size:20,color:s.net_profit>0?j.success.main:j.error.main}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Net Profit"})]}),e.jsx(l,{variant:"h4",fontWeight:700,color:s.net_profit>0?"success.main":"error.main",children:se(s.net_profit)})]})]}),s.deal_score&&e.jsxs(p,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",mb:.5,children:"Deal Score"}),e.jsx(l,{variant:"body1",fontWeight:600,children:s.deal_score})]}),s.gating_status&&e.jsxs(p,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",mb:.5,children:"Gating Status"}),e.jsx(O,{label:s.gating_status,size:"small",color:s.gating_status==="ungated"?"success":"warning"})]}),e.jsxs(p,{display:"flex",gap:2,mt:3,children:[e.jsx(z,{variant:"contained",startIcon:e.jsx(Se,{size:16}),onClick:oe,sx:{backgroundColor:j.purple.main,"&:hover":{backgroundColor:j.purple.dark},flex:1},children:"View Full Details"}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(q,{size:16}),onClick:w,sx:{flex:1},children:"Analyze Another"})]})]})]})}),!s&&!R&&e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"h6",fontWeight:600,mb:2,children:"ðŸ“‹ Recent Analyses"}),e.jsx(l,{color:"text.secondary",children:"No recent analyses"})]})]})};export{oo as default};
