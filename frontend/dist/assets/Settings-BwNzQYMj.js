import{r as c,au as ta,ay as De,az as aa,av as wt,aA as ra,aB as pt,aC as Ke,aD as ht,aa as k,aE as Xe,a6 as na,a5 as sa,J as Ee,j as e,a7 as oa,aF as la,a9 as ia,aG as Ae,ab as Ie,ar as ze,ac as ca,aH as Ct,aI as _t,at as kt,aJ as Dt,c as We,o as W,aK as Nt,Q as xt,C as ge,b as fe,p as Te,B as g,T as f,d as Fe,K as we,a as U,h as le,aL as da,k as ua,q as ne,l as pa,ah as Pt,ai as Lt,aj as At,aM as ha,E as Tt,I as ma,$ as Wt,a0 as Vt,a1 as Ot,D as ga,ak as Ge,al as fa,i as xa,u as ba,aN as ya,F as va,f as ja,aO as mt}from"./index-BYznCITu.js";import{C as ft}from"./check-circle-mt917hOV.js";import{M as Oe}from"./message-circle-P8lVRoj7.js";import{b as Sa,c as wa,d as Ca}from"./Stepper-MXxkIWKC.js";import{P as _a}from"./plus-DANvhV5h.js";import{L as zt,S as gt}from"./Switch-C_sNVs-g.js";import{T as ka}from"./trash-2-B_awrX4j.js";import{D as Bt}from"./DialogActions-DoklkOxt.js";import{T as Pa,a as Ne}from"./Tabs-BoFdI0tU.js";import{T as La,a as Aa,b as Ta,c as Be}from"./TableRow-hZp2xtn3.js";import{E as za}from"./external-link-6b3xdYup.js";const Fa={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Ia(t,a,r=(d,p)=>d===p){return t.length===a.length&&t.every((d,p)=>r(d,a[p]))}const $a=2;function Ht(t,a){return t-a}function Ft(t,a){var r;const{index:d}=(r=t.reduce((p,E,T)=>{const m=Math.abs(a-E);return p===null||m<p.distance||m===p.distance?{distance:m,index:T}:p},null))!=null?r:{};return d}function He(t,a){if(a.current!==void 0&&t.changedTouches){const r=t;for(let d=0;d<r.changedTouches.length;d+=1){const p=r.changedTouches[d];if(p.identifier===a.current)return{x:p.clientX,y:p.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Je(t,a,r){return(t-a)*100/(r-a)}function Ma(t,a,r){return(r-a)*t+a}function Ea(t){if(Math.abs(t)<1){const r=t.toExponential().split("e-"),d=r[0].split(".")[1];return(d?d.length:0)+parseInt(r[1],10)}const a=t.toString().split(".")[1];return a?a.length:0}function Ra(t,a,r){const d=Math.round((t-r)/a)*a+r;return Number(d.toFixed(Ea(a)))}function It({values:t,newValue:a,index:r}){const d=t.slice();return d[r]=a,d.sort(Ht)}function Ue({sliderRef:t,activeIndex:a,setActive:r}){var d,p;const E=Ke(t.current);if(!((d=t.current)!=null&&d.contains(E.activeElement))||Number(E==null||(p=E.activeElement)==null?void 0:p.getAttribute("data-index"))!==a){var T;(T=t.current)==null||T.querySelector(`[type="range"][data-index="${a}"]`).focus()}r&&r(a)}function Ye(t,a){return typeof t=="number"&&typeof a=="number"?t===a:typeof t=="object"&&typeof a=="object"?Ia(t,a):!1}const Da={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},Na=t=>t;let qe;function $t(){return qe===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?qe=CSS.supports("touch-action","none"):qe=!0),qe}function Wa(t){const{"aria-labelledby":a,defaultValue:r,disabled:d=!1,disableSwap:p=!1,isRtl:E=!1,marks:T=!1,max:m=100,min:x=0,name:V,onChange:Y,onChangeCommitted:G,orientation:se="horizontal",rootRef:R,scale:l=Na,step:D=1,shiftStep:b=10,tabIndex:z,value:Q}=t,P=c.useRef(void 0),[de,ie]=c.useState(-1),[J,oe]=c.useState(-1),[xe,ce]=c.useState(!1),ae=c.useRef(0),[y,ee]=ta({controlled:Q,default:r??x,name:"Slider"}),j=Y&&((n,i,u)=>{const C=n.nativeEvent||n,_=new C.constructor(C.type,C);Object.defineProperty(_,"target",{writable:!0,value:{value:i,name:V}}),Y(_,i,u)}),L=Array.isArray(y);let h=L?y.slice().sort(Ht):[y];h=h.map(n=>n==null?x:De(n,x,m));const be=T===!0&&D!==null?[...Array(Math.floor((m-x)/D)+1)].map((n,i)=>({value:x+D*i})):T||[],$=be.map(n=>n.value),{isFocusVisibleRef:q,onBlur:he,onFocus:_e,ref:ke}=aa(),[N,K]=c.useState(-1),O=c.useRef(null),ye=wt(ke,O),Pe=wt(R,ye),ve=n=>i=>{var u;const C=Number(i.currentTarget.getAttribute("data-index"));_e(i),q.current===!0&&K(C),oe(C),n==null||(u=n.onFocus)==null||u.call(n,i)},je=n=>i=>{var u;he(i),q.current===!1&&K(-1),oe(-1),n==null||(u=n.onBlur)==null||u.call(n,i)},Le=(n,i)=>{const u=Number(n.currentTarget.getAttribute("data-index")),C=h[u],_=$.indexOf(C);let v=i;if(be&&D==null){const me=$[$.length-1];v>me?v=me:v<$[0]?v=$[0]:v=v<C?$[_-1]:$[_+1]}if(v=De(v,x,m),L){p&&(v=De(v,h[u-1]||-1/0,h[u+1]||1/0));const me=v;v=It({values:h,newValue:v,index:u});let Se=u;p||(Se=v.indexOf(me)),Ue({sliderRef:O,activeIndex:Se})}ee(v),K(u),j&&!Ye(v,y)&&j(n,v,u),G&&G(n,v)},s=n=>i=>{var u;if(D!==null){const C=Number(i.currentTarget.getAttribute("data-index")),_=h[C];let v=null;(i.key==="ArrowLeft"||i.key==="ArrowDown")&&i.shiftKey||i.key==="PageDown"?v=Math.max(_-b,x):((i.key==="ArrowRight"||i.key==="ArrowUp")&&i.shiftKey||i.key==="PageUp")&&(v=Math.min(_+b,m)),v!==null&&(Le(i,v),i.preventDefault())}n==null||(u=n.onKeyDown)==null||u.call(n,i)};ra(()=>{if(d&&O.current.contains(document.activeElement)){var n;(n=document.activeElement)==null||n.blur()}},[d]),d&&de!==-1&&ie(-1),d&&N!==-1&&K(-1);const S=n=>i=>{var u;(u=n.onChange)==null||u.call(n,i),Le(i,i.target.valueAsNumber)},F=c.useRef(void 0);let B=se;E&&se==="horizontal"&&(B+="-reverse");const I=({finger:n,move:i=!1})=>{const{current:u}=O,{width:C,height:_,bottom:v,left:me}=u.getBoundingClientRect();let Se;B.indexOf("vertical")===0?Se=(v-n.y)/_:Se=(n.x-me)/C,B.indexOf("-reverse")!==-1&&(Se=1-Se);let A;if(A=Ma(Se,x,m),D)A=Ra(A,D,x);else{const Me=Ft($,A);A=$[Me]}A=De(A,x,m);let ue=0;if(L){i?ue=F.current:ue=Ft(h,A),p&&(A=De(A,h[ue-1]||-1/0,h[ue+1]||1/0));const Me=A;A=It({values:h,newValue:A,index:ue}),p&&i||(ue=A.indexOf(Me),F.current=ue)}return{newValue:A,activeIndex:ue}},M=pt(n=>{const i=He(n,P);if(!i)return;if(ae.current+=1,n.type==="mousemove"&&n.buttons===0){re(n);return}const{newValue:u,activeIndex:C}=I({finger:i,move:!0});Ue({sliderRef:O,activeIndex:C,setActive:ie}),ee(u),!xe&&ae.current>$a&&ce(!0),j&&!Ye(u,y)&&j(n,u,C)}),re=pt(n=>{const i=He(n,P);if(ce(!1),!i)return;const{newValue:u}=I({finger:i,move:!0});ie(-1),n.type==="touchend"&&oe(-1),G&&G(n,u),P.current=void 0,w()}),o=pt(n=>{if(d)return;$t()||n.preventDefault();const i=n.changedTouches[0];i!=null&&(P.current=i.identifier);const u=He(n,P);if(u!==!1){const{newValue:_,activeIndex:v}=I({finger:u});Ue({sliderRef:O,activeIndex:v,setActive:ie}),ee(_),j&&!Ye(_,y)&&j(n,_,v)}ae.current=0;const C=Ke(O.current);C.addEventListener("touchmove",M,{passive:!0}),C.addEventListener("touchend",re,{passive:!0})}),w=c.useCallback(()=>{const n=Ke(O.current);n.removeEventListener("mousemove",M),n.removeEventListener("mouseup",re),n.removeEventListener("touchmove",M),n.removeEventListener("touchend",re)},[re,M]);c.useEffect(()=>{const{current:n}=O;return n.addEventListener("touchstart",o,{passive:$t()}),()=>{n.removeEventListener("touchstart",o),w()}},[w,o]),c.useEffect(()=>{d&&w()},[d,w]);const H=n=>i=>{var u;if((u=n.onMouseDown)==null||u.call(n,i),d||i.defaultPrevented||i.button!==0)return;i.preventDefault();const C=He(i,P);if(C!==!1){const{newValue:v,activeIndex:me}=I({finger:C});Ue({sliderRef:O,activeIndex:me,setActive:ie}),ee(v),j&&!Ye(v,y)&&j(i,v,me)}ae.current=0;const _=Ke(O.current);_.addEventListener("mousemove",M,{passive:!0}),_.addEventListener("mouseup",re)},Z=Je(L?h[0]:x,x,m),$e=Je(h[h.length-1],x,m)-Z,Qe=(n={})=>{const i=ht(n),u={onMouseDown:H(i||{})},C=k({},i,u);return k({},n,{ref:Pe},C)},Ze=n=>i=>{var u;(u=n.onMouseOver)==null||u.call(n,i);const C=Number(i.currentTarget.getAttribute("data-index"));oe(C)},et=n=>i=>{var u;(u=n.onMouseLeave)==null||u.call(n,i),oe(-1)};return{active:de,axis:B,axisProps:Da,dragging:xe,focusedThumbIndex:N,getHiddenInputProps:(n={})=>{var i;const u=ht(n),C={onChange:S(u||{}),onFocus:ve(u||{}),onBlur:je(u||{}),onKeyDown:s(u||{})},_=k({},u,C);return k({tabIndex:z,"aria-labelledby":a,"aria-orientation":se,"aria-valuemax":l(m),"aria-valuemin":l(x),name:V,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":(i=t.step)!=null?i:void 0,disabled:d},n,_,{style:k({},Fa,{direction:E?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Qe,getThumbProps:(n={})=>{const i=ht(n),u={onMouseOver:Ze(i||{}),onMouseLeave:et(i||{})};return k({},n,i,u)},marks:be,open:J,range:L,rootRef:Pe,trackLeap:$e,trackOffset:Z,values:h,getThumbStyle:n=>({pointerEvents:de!==-1&&de!==n?"none":void 0})}}const Va=t=>!t||!Xe(t);function Oa(t){return sa("MuiSlider",t)}const pe=na("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Ba=t=>{const{open:a}=t;return{offset:Ee(a&&pe.valueLabelOpen),circle:pe.valueLabelCircle,label:pe.valueLabelLabel}};function Ha(t){const{children:a,className:r,value:d}=t,p=Ba(t);return a?c.cloneElement(a,{className:Ee(a.props.className)},e.jsxs(c.Fragment,{children:[a.props.children,e.jsx("span",{className:Ee(p.offset,r),"aria-hidden":!0,children:e.jsx("span",{className:p.circle,children:e.jsx("span",{className:p.label,children:d})})})]})):null}const Ua=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Mt(t){return t}const Ya=Ie("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.root,a[`color${ze(r.color)}`],r.size!=="medium"&&a[`size${ze(r.size)}`],r.marked&&a.marked,r.orientation==="vertical"&&a.vertical,r.track==="inverted"&&a.trackInverted,r.track===!1&&a.trackFalse]}})(({theme:t})=>{var a;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${pe.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${pe.dragging}`]:{[`& .${pe.thumb}, & .${pe.track}`]:{transition:"none"}},variants:[...Object.keys(((a=t.vars)!=null?a:t).palette).filter(r=>{var d;return((d=t.vars)!=null?d:t).palette[r].main}).map(r=>({props:{color:r},style:{color:(t.vars||t).palette[r].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),qa=Ie("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,a)=>a.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ka=Ie("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,a)=>a.track})(({theme:t})=>{var a;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((a=t.vars)!=null?a:t).palette).filter(r=>{var d;return((d=t.vars)!=null?d:t).palette[r].main}).map(r=>({props:{color:r,track:"inverted"},style:k({},t.vars?{backgroundColor:t.vars.palette.Slider[`${r}Track`],borderColor:t.vars.palette.Slider[`${r}Track`]}:k({backgroundColor:Ct(t.palette[r].main,.62),borderColor:Ct(t.palette[r].main,.62)},t.applyStyles("dark",{backgroundColor:_t(t.palette[r].main,.5)}),t.applyStyles("dark",{borderColor:_t(t.palette[r].main,.5)})))}))]}}),Xa=Ie("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.thumb,a[`thumbColor${ze(r.color)}`],r.size!=="medium"&&a[`thumbSize${ze(r.size)}`]]}})(({theme:t})=>{var a;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${pe.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((a=t.vars)!=null?a:t).palette).filter(r=>{var d;return((d=t.vars)!=null?d:t).palette[r].main}).map(r=>({props:{color:r},style:{[`&:hover, &.${pe.focusVisible}`]:k({},t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[r].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${kt(t.palette[r].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${pe.active}`]:k({},t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[r].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${kt(t.palette[r].main,.16)}`})}}))]}}),Ga=Ie(Ha,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,a)=>a.valueLabel})(({theme:t})=>k({zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${pe.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${pe.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),Ja=Ie("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>Dt(t)&&t!=="markActive",overridesResolver:(t,a)=>{const{markActive:r}=t;return[a.mark,r&&a.markActive]}})(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]})),Qa=Ie("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>Dt(t)&&t!=="markLabelActive",overridesResolver:(t,a)=>a.markLabel})(({theme:t})=>k({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]})),Za=t=>{const{disabled:a,dragging:r,marked:d,orientation:p,track:E,classes:T,color:m,size:x}=t,V={root:["root",a&&"disabled",r&&"dragging",d&&"marked",p==="vertical"&&"vertical",E==="inverted"&&"trackInverted",E===!1&&"trackFalse",m&&`color${ze(m)}`,x&&`size${ze(x)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",a&&"disabled",x&&`thumbSize${ze(x)}`,m&&`thumbColor${ze(m)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ca(V,Oa,T)},er=({children:t})=>t,Et=c.forwardRef(function(a,r){var d,p,E,T,m,x,V,Y,G,se,R,l,D,b,z,Q,P,de,ie,J,oe,xe,ce,ae;const y=oa({props:a,name:"MuiSlider"}),ee=la(),{"aria-label":j,"aria-valuetext":L,"aria-labelledby":h,component:be="span",components:$={},componentsProps:q={},color:he="primary",classes:_e,className:ke,disableSwap:N=!1,disabled:K=!1,getAriaLabel:O,getAriaValueText:ye,marks:Pe=!1,max:ve=100,min:je=0,orientation:Le="horizontal",shiftStep:s=10,size:S="medium",step:F=1,scale:B=Mt,slotProps:I,slots:M,track:re="normal",valueLabelDisplay:o="off",valueLabelFormat:w=Mt}=y,H=ia(y,Ua),Z=k({},y,{isRtl:ee,max:ve,min:je,classes:_e,disabled:K,disableSwap:N,orientation:Le,marks:Pe,color:he,size:S,step:F,shiftStep:s,scale:B,track:re,valueLabelDisplay:o,valueLabelFormat:w}),{axisProps:$e,getRootProps:Qe,getHiddenInputProps:Ze,getThumbProps:et,open:bt,active:tt,axis:Re,focusedThumbIndex:n,range:i,dragging:u,marks:C,values:_,trackOffset:v,trackLeap:me,getThumbStyle:Se}=Wa(k({},Z,{rootRef:r}));Z.marked=C.length>0&&C.some(X=>X.label),Z.dragging=u,Z.focusedThumbIndex=n;const A=Za(Z),ue=(d=(p=M==null?void 0:M.root)!=null?p:$.Root)!=null?d:Ya,Me=(E=(T=M==null?void 0:M.rail)!=null?T:$.Rail)!=null?E:qa,yt=(m=(x=M==null?void 0:M.track)!=null?x:$.Track)!=null?m:Ka,vt=(V=(Y=M==null?void 0:M.thumb)!=null?Y:$.Thumb)!=null?V:Xa,jt=(G=(se=M==null?void 0:M.valueLabel)!=null?se:$.ValueLabel)!=null?G:Ga,at=(R=(l=M==null?void 0:M.mark)!=null?l:$.Mark)!=null?R:Ja,rt=(D=(b=M==null?void 0:M.markLabel)!=null?b:$.MarkLabel)!=null?D:Qa,St=(z=(Q=M==null?void 0:M.input)!=null?Q:$.Input)!=null?z:"input",nt=(P=I==null?void 0:I.root)!=null?P:q.root,Yt=(de=I==null?void 0:I.rail)!=null?de:q.rail,st=(ie=I==null?void 0:I.track)!=null?ie:q.track,ot=(J=I==null?void 0:I.thumb)!=null?J:q.thumb,lt=(oe=I==null?void 0:I.valueLabel)!=null?oe:q.valueLabel,qt=(xe=I==null?void 0:I.mark)!=null?xe:q.mark,Kt=(ce=I==null?void 0:I.markLabel)!=null?ce:q.markLabel,Xt=(ae=I==null?void 0:I.input)!=null?ae:q.input,Gt=Ae({elementType:ue,getSlotProps:Qe,externalSlotProps:nt,externalForwardedProps:H,additionalProps:k({},Va(ue)&&{as:be}),ownerState:k({},Z,nt==null?void 0:nt.ownerState),className:[A.root,ke]}),Jt=Ae({elementType:Me,externalSlotProps:Yt,ownerState:Z,className:A.rail}),Qt=Ae({elementType:yt,externalSlotProps:st,additionalProps:{style:k({},$e[Re].offset(v),$e[Re].leap(me))},ownerState:k({},Z,st==null?void 0:st.ownerState),className:A.track}),it=Ae({elementType:vt,getSlotProps:et,externalSlotProps:ot,ownerState:k({},Z,ot==null?void 0:ot.ownerState),className:A.thumb}),Zt=Ae({elementType:jt,externalSlotProps:lt,ownerState:k({},Z,lt==null?void 0:lt.ownerState),className:A.valueLabel}),ct=Ae({elementType:at,externalSlotProps:qt,ownerState:Z,className:A.mark}),dt=Ae({elementType:rt,externalSlotProps:Kt,ownerState:Z,className:A.markLabel}),ea=Ae({elementType:St,getSlotProps:Ze,externalSlotProps:Xt,ownerState:Z});return e.jsxs(ue,k({},Gt,{children:[e.jsx(Me,k({},Jt)),e.jsx(yt,k({},Qt)),C.filter(X=>X.value>=je&&X.value<=ve).map((X,te)=>{const ut=Je(X.value,je,ve),Ve=$e[Re].offset(ut);let Ce;return re===!1?Ce=_.indexOf(X.value)!==-1:Ce=re==="normal"&&(i?X.value>=_[0]&&X.value<=_[_.length-1]:X.value<=_[0])||re==="inverted"&&(i?X.value<=_[0]||X.value>=_[_.length-1]:X.value>=_[0]),e.jsxs(c.Fragment,{children:[e.jsx(at,k({"data-index":te},ct,!Xe(at)&&{markActive:Ce},{style:k({},Ve,ct.style),className:Ee(ct.className,Ce&&A.markActive)})),X.label!=null?e.jsx(rt,k({"aria-hidden":!0,"data-index":te},dt,!Xe(rt)&&{markLabelActive:Ce},{style:k({},Ve,dt.style),className:Ee(A.markLabel,dt.className,Ce&&A.markLabelActive),children:X.label})):null]},te)}),_.map((X,te)=>{const ut=Je(X,je,ve),Ve=$e[Re].offset(ut),Ce=o==="off"?er:jt;return e.jsx(Ce,k({},!Xe(Ce)&&{valueLabelFormat:w,valueLabelDisplay:o,value:typeof w=="function"?w(B(X),te):w,index:te,open:bt===te||tt===te||o==="on",disabled:K},Zt,{children:e.jsx(vt,k({"data-index":te},it,{className:Ee(A.thumb,it.className,tt===te&&A.active,n===te&&A.focusVisible),style:k({},Ve,Se(te),it.style),children:e.jsx(St,k({"data-index":te,"aria-label":O?O(te):j,"aria-valuenow":B(X),"aria-labelledby":h,"aria-valuetext":ye?ye(B(X),te):L,value:_[te]},ea))}))}),te)})]}))});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=We("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=We("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=We("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=We("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=We("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),nr=()=>{const[t,a]=c.useState(null),[r,d]=c.useState(null),[p,E]=c.useState(null),[T,m]=c.useState(!0),[x,V]=c.useState(null),Y=async()=>{try{const b=await W.get("/settings/profile");a(b.data)}catch(b){V(b.message)}},G=async()=>{try{const b=await W.get("/settings/alerts");d(b.data)}catch(b){V(b.message)}},se=async()=>{try{const b=await W.get("/settings/costs");E(b.data)}catch(b){V(b.message)}};return c.useEffect(()=>{(async()=>{m(!0),await Promise.all([Y(),G(),se()]),m(!1)})()},[]),{profile:t,alertSettings:r,costSettings:p,loading:T,error:x,refetch:async()=>{await Promise.all([Y(),G(),se()])},updateProfile:async b=>{var z,Q;try{const P=await W.put("/settings/profile",b);return a(P.data),P.data}catch(P){throw new Error(((Q=(z=P.response)==null?void 0:z.data)==null?void 0:Q.detail)||"Failed to update profile")}},updateAlertSettings:async b=>{var z,Q;try{const P=await W.put("/settings/alerts",b);return d(P.data),P.data}catch(P){throw new Error(((Q=(z=P.response)==null?void 0:z.data)==null?void 0:Q.detail)||"Failed to update alert settings")}},updateCostSettings:async b=>{var z,Q;try{const P=await W.put("/settings/costs",b);return E(P.data),P.data}catch(P){throw new Error(((Q=(z=P.response)==null?void 0:z.data)==null?void 0:Q.detail)||"Failed to update cost settings")}}}};function sr(){const[t,a]=Nt(),[r,d]=c.useState(null),[p,E]=c.useState(!0),[T,m]=c.useState(!1),[x,V]=c.useState(null),{showToast:Y}=xt();c.useEffect(()=>{if(G(),t.get("amazon_connected")==="true"&&(V({type:"success",text:"Amazon connected successfully!"}),Y("Amazon account connected successfully!","success"),t.delete("amazon_connected"),a(t,{replace:!0}),G()),t.get("amazon_error")){const l=t.get("amazon_error");V({type:"error",text:l}),Y(`Connection failed: ${l}`,"error"),t.delete("amazon_error"),a(t,{replace:!0})}},[]);const G=async()=>{try{const l=await W.get("/integrations/amazon/connection");d(l.data)}catch(l){console.error("Failed to fetch connection:",l),d({connected:!1})}finally{E(!1)}},se=async()=>{var l,D;m(!0);try{const b=await W.get("/integrations/amazon/oauth/authorize");window.location.href=b.data.authorization_url}catch(b){const z=((D=(l=b.response)==null?void 0:l.data)==null?void 0:D.detail)||"Failed to start connection";V({type:"error",text:z}),Y(z,"error"),m(!1)}},R=async()=>{var l,D;if(confirm("Disconnect your Amazon account? You will need to reconnect to check gating status and get accurate fees."))try{await W.delete("/integrations/amazon/disconnect"),d({connected:!1}),V({type:"success",text:"Disconnected successfully"}),Y("Amazon account disconnected","success"),G()}catch(b){const z=((D=(l=b.response)==null?void 0:l.data)==null?void 0:D.detail)||"Failed to disconnect";V({type:"error",text:z}),Y(z,"error")}};return p?e.jsx(ge,{children:e.jsx(fe,{sx:{textAlign:"center",py:4},children:e.jsx(Te,{})})}):e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsxs(g,{display:"flex",alignItems:"center",gap:2,mb:2,children:[e.jsx(Rt,{size:32,style:{color:"#FF9900"}}),e.jsxs(g,{flex:1,children:[e.jsx(f,{variant:"h6",fontWeight:600,children:"Amazon Seller Account"}),e.jsx(f,{variant:"body2",color:"text.secondary",children:"Connect to check YOUR gating status and fees"})]}),(r==null?void 0:r.connected)&&e.jsx(Fe,{icon:e.jsx(ft,{size:16}),label:"Connected",color:"success"})]}),x&&e.jsx(we,{severity:x.type,sx:{mb:2},onClose:()=>V(null),children:x.text}),r!=null&&r.connected?e.jsxs(g,{children:[e.jsxs(g,{mb:2,children:[e.jsxs(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[e.jsx("strong",{children:"Seller ID:"})," ",r.seller_id||"Not available"]}),e.jsxs(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[e.jsx("strong",{children:"Marketplace:"})," ",r.marketplace_id||"US"]}),r.connected_at&&e.jsxs(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[e.jsx("strong",{children:"Connected:"})," ",new Date(r.connected_at).toLocaleDateString()]}),r.last_used_at&&e.jsxs(f,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Last used:"})," ",new Date(r.last_used_at).toLocaleString()]})]}),e.jsx(U,{variant:"outlined",color:"error",startIcon:e.jsx(Ut,{size:18}),onClick:R,children:"Disconnect"})]}):e.jsxs(g,{children:[e.jsx(we,{severity:"info",sx:{mb:2},children:"Connect your Amazon Seller account to see YOUR eligibility status on products. Each user connects their own account and sees their own gating status."}),e.jsx(U,{variant:"contained",size:"large",startIcon:T?e.jsx(Te,{size:20,color:"inherit"}):e.jsx(Rt,{size:20}),onClick:se,disabled:T,sx:{bgcolor:"#FF9900","&:hover":{bgcolor:"#E88B00"},color:"#000"},children:T?"Connecting...":"Connect Amazon"})]}),!(r!=null&&r.connected)&&e.jsxs(g,{sx:{mt:3,p:2,bgcolor:le.gray[50],borderRadius:2,border:"1px solid",borderColor:le.gray[200]},children:[e.jsx(f,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"ðŸ”“ Why Connect?"}),e.jsxs(g,{component:"ul",sx:{m:0,pl:2.5},children:[e.jsx("li",{children:e.jsxs(f,{variant:"body2",children:[e.jsx("strong",{children:"Real gating checks"})," â€” Know if YOU can list a product, not just estimates"]})}),e.jsx("li",{children:e.jsxs(f,{variant:"body2",children:[e.jsx("strong",{children:"Accurate FBA fees"})," â€” Get exact fees from Amazon for your account"]})}),e.jsx("li",{children:e.jsxs(f,{variant:"body2",children:[e.jsx("strong",{children:"Better analysis"})," â€” More accurate profit calculations based on your account"]})})]})]})]})})}const or=["Enter Phone","Verify Code","Connected"],lr=()=>{const t=da(),[a,r]=c.useState(null),[d,p]=c.useState(!0),[E,T]=c.useState(0),[m,x]=c.useState(""),[V,Y]=c.useState(""),[G,se]=c.useState(""),[R,l]=c.useState(!1),[D,b]=c.useState(!1),[z,Q]=c.useState([]),[P,de]=c.useState([]),[ie,J]=c.useState(!1),[oe,xe]=c.useState(!1),[ce,ae]=c.useState({}),[y,ee]=c.useState(null),[j,L]=c.useState({createSupplier:!0,supplierName:"",supplierWebsite:"",supplierEmail:"",supplierNotes:""}),{showToast:h}=xt(),{getLimit:be,isLimitReached:$}=ua();c.useEffect(()=>{q()},[]);const q=async()=>{try{const s=await W.get("/integrations/telegram/status");r(s.data),s.data.connected&&he()}catch(s){console.error("Failed to fetch Telegram status:",s)}finally{p(!1)}},he=async()=>{try{const s=await W.get("/integrations/telegram/channels");Q(s.data.channels||[])}catch(s){console.error("Failed to fetch channels:",s)}},_e=async()=>{var s,S;if(!m.trim()){h("Please enter your phone number","error");return}b(!0);try{const F=await W.post("/integrations/telegram/auth/start",{phone_number:m});h("Verification code sent to your Telegram app","success"),T(1)}catch(F){h(((S=(s=F.response)==null?void 0:s.data)==null?void 0:S.detail)||"Failed to send code","error")}finally{b(!1)}},ke=async()=>{var s,S;if(!V.trim()){h("Please enter the verification code","error");return}b(!0);try{const F=await W.post("/integrations/telegram/auth/verify",{code:V,password:R?G:void 0});F.data.status==="2fa_required"?(l(!0),h("Please enter your 2FA password","warning")):F.data.status==="connected"&&(h("Telegram connected successfully!","success"),T(2),q())}catch(F){h(((S=(s=F.response)==null?void 0:s.data)==null?void 0:S.detail)||"Verification failed","error")}finally{b(!1)}},N=async()=>{if(confirm("Disconnect Telegram? You will stop receiving deals from your channels."))try{await W.delete("/integrations/telegram/disconnect"),r({connected:!1}),Q([]),T(0),x(""),Y(""),h("Telegram disconnected","success")}catch{h("Failed to disconnect","error")}},K=async()=>{var s,S;xe(!0);try{const F=await W.get("/integrations/telegram/channels/available");de(F.data.channels||[]),J(!0)}catch(F){h(((S=(s=F.response)==null?void 0:s.data)==null?void 0:S.detail)||"Failed to fetch channels","error")}finally{xe(!1)}},O=s=>{ee(s),L({...j,supplierName:s.title||s.name||""})},ye=async(s=null)=>{var F,B;const S=s||y;if(S)try{const I={channel_id:S.id,channel_name:S.name||S.title,channel_username:S.username,channel_type:S.type||"channel",create_supplier:j.createSupplier,supplier_name:j.supplierName||S.name||S.title,supplier_website:j.supplierWebsite||null,supplier_contact_email:j.supplierEmail||null,supplier_notes:j.supplierNotes||null},M=await W.post("/integrations/telegram/channels",I);h(`Added ${S.name}${M.data.supplier_id?" and created supplier":""}`,"success"),ee(null),L({createSupplier:!0,supplierName:"",supplierWebsite:"",supplierEmail:"",supplierNotes:""}),he(),q(),de(re=>re.map(o=>o.id===S.id?{...o,is_monitored:!0}:o)),ie&&J(!1)}catch(I){h(((B=(F=I.response)==null?void 0:F.data)==null?void 0:B.detail)||"Failed to add channel","error")}},Pe=async s=>{var S,F;ae(B=>({...B,[s]:!0}));try{const B=await W.post(`/integrations/telegram/channels/${s}/backfill?days=14`);h(`Synced ${B.data.messages} messages, found ${B.data.deals} deals`,"success"),he()}catch(B){h("Failed to sync: "+(((F=(S=B.response)==null?void 0:S.data)==null?void 0:F.detail)||B.message),"error")}finally{ae(B=>({...B,[s]:!1}))}},ve=async s=>{try{await W.delete(`/integrations/telegram/channels/${s}`),h("Channel removed","success"),he(),q()}catch{h("Failed to remove channel","error")}},je=async()=>{var s,S;try{const F=await W.post("/integrations/telegram/monitoring/start");h(`Monitoring ${F.data.channels} channels`,"success"),q()}catch(F){h(((S=(s=F.response)==null?void 0:s.data)==null?void 0:S.detail)||"Failed to start monitoring","error")}},Le=async()=>{try{await W.post("/integrations/telegram/monitoring/stop"),h("Monitoring stopped","success"),q()}catch{h("Failed to stop monitoring","error")}};return d?e.jsx(ge,{children:e.jsx(fe,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})})}):e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsxs(g,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2,children:[e.jsxs(g,{children:[e.jsxs(g,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Oe,{size:20,style:{color:"#0088cc"}}),e.jsx(f,{variant:"h6",fontWeight:600,children:"Telegram Monitoring"}),e.jsx(Fe,{icon:a!=null&&a.connected?e.jsx(ft,{size:16}):void 0,label:a!=null&&a.connected?"Connected":"Not Connected",color:a!=null&&a.connected?"success":"default",size:"small"}),(a==null?void 0:a.monitoring)&&e.jsx(Fe,{label:"Monitoring",color:"primary",size:"small"})]}),e.jsx(f,{variant:"body2",color:"text.secondary",children:"Auto-extract deals from supplier channels"})]}),(a==null?void 0:a.connected)&&e.jsx(U,{variant:"outlined",color:"error",size:"small",startIcon:e.jsx(Ut,{size:18}),onClick:N,children:"Disconnect"})]}),!(a!=null&&a.connected)&&e.jsxs(g,{children:[e.jsx(Sa,{activeStep:E,sx:{mb:3},children:or.map(s=>e.jsx(wa,{children:e.jsx(Ca,{children:s})},s))}),E===0&&e.jsxs(g,{children:[e.jsx(f,{variant:"body2",color:"text.secondary",mb:2,children:"Enter your phone number to connect your Telegram account. We'll send a verification code to your Telegram app."}),e.jsx(ne,{label:"Phone Number",placeholder:"+1 234 567 8900",value:m,onChange:s=>x(s.target.value),fullWidth:!0,sx:{mb:2},helperText:"Include country code (e.g., +1 for US)"}),e.jsx(U,{variant:"contained",onClick:_e,disabled:D,startIcon:D?e.jsx(Te,{size:16}):e.jsx(Oe,{size:18}),sx:{bgcolor:"#0088cc","&:hover":{bgcolor:"#006699"}},children:D?"Sending...":"Send Code"})]}),E===1&&e.jsxs(g,{children:[e.jsx(we,{severity:"info",sx:{mb:2},children:"Check your Telegram app for the verification code"}),e.jsx(ne,{label:"Verification Code",placeholder:"12345",value:V,onChange:s=>Y(s.target.value.replace(/\D/g,"")),fullWidth:!0,autoFocus:!0,inputProps:{maxLength:5,inputMode:"numeric",pattern:"[0-9]*"},sx:{mb:2},helperText:"Enter the 5-digit code from Telegram"}),R&&e.jsx(ne,{label:"2FA Password",type:"password",autoComplete:"current-password",value:G,onChange:s=>se(s.target.value),fullWidth:!0,sx:{mb:2},helperText:"Your Telegram 2FA password"}),e.jsxs(g,{display:"flex",gap:1,children:[e.jsx(U,{variant:"outlined",onClick:()=>{T(0),Y(""),l(!1)},children:"Back"}),e.jsx(U,{variant:"contained",onClick:ke,disabled:D,startIcon:D?e.jsx(Te,{size:16}):e.jsx(ft,{size:18}),children:D?"Verifying...":"Verify"})]})]})]}),(a==null?void 0:a.connected)&&e.jsxs(g,{children:[e.jsx(g,{mb:2,children:e.jsx(pa,{label:"Monitored Channels",used:z.length,limit:(a==null?void 0:a.channel_limit)||be("telegram_channels")})}),e.jsxs(g,{display:"flex",gap:1,mb:2,children:[a!=null&&a.monitoring?e.jsx(U,{variant:"outlined",color:"warning",startIcon:e.jsx(rr,{size:18}),onClick:Le,children:"Stop Monitoring"}):e.jsx(U,{variant:"contained",color:"success",startIcon:e.jsx(tr,{size:18}),onClick:je,disabled:z.length===0,children:"Start Monitoring"}),e.jsx(U,{variant:"outlined",startIcon:oe?e.jsx(Te,{size:16}):e.jsx(_a,{size:18}),onClick:K,disabled:oe||$("telegram_channels",z.length),children:"Add Channel"})]}),(z||[]).length>0?e.jsx(Pt,{dense:!0,children:(z||[]).map(s=>e.jsxs(Lt,{children:[e.jsx(zt,{children:e.jsx(Oe,{size:18,style:{color:t.palette.primary.main}})}),e.jsx(At,{primary:s.channel_name,secondary:e.jsxs(g,{display:"flex",gap:2,children:[e.jsxs("span",{children:[s.messages_received||0," messages"]}),e.jsxs("span",{children:[s.deals_extracted||0," deals"]})]}),secondaryTypographyProps:{component:"div"}}),e.jsx(ha,{children:e.jsxs(g,{display:"flex",gap:1,alignItems:"center",children:[e.jsx(Tt,{title:"Sync last 14 days of messages",children:e.jsx(U,{size:"small",variant:"outlined",onClick:()=>Pe(s.channel_id),disabled:ce[s.channel_id],startIcon:ce[s.channel_id]?e.jsx(Te,{size:14}):e.jsx(ar,{size:14}),children:ce[s.channel_id]?"Syncing...":"Sync 14 Days"})}),e.jsx(Tt,{title:"Remove channel",children:e.jsx(ma,{edge:"end",size:"small",onClick:()=>ve(s.channel_id),children:e.jsx(ka,{size:18})})})]})})]},s.id))}):e.jsx(we,{severity:"info",children:'No channels added yet. Click "Add Channel" to select channels to monitor.'}),(a==null?void 0:a.monitoring)&&e.jsxs(g,{mt:2,p:2,sx:{bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:2},children:[e.jsx(f,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Monitoring Active"}),e.jsx(f,{variant:"body2",color:"text.secondary",children:"Deals will be automatically extracted and appear in your feed."})]})]}),e.jsxs(Wt,{open:ie,onClose:()=>{J(!1),ee(null),L({createSupplier:!0,supplierName:"",supplierWebsite:"",supplierEmail:"",supplierNotes:""})},maxWidth:"sm",fullWidth:!0,children:[e.jsx(Vt,{children:"Add Telegram Channel"}),e.jsx(Ot,{dividers:!0,children:(P||[]).length>0?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{children:(P||[]).map(s=>e.jsxs(Lt,{button:!0,selected:(y==null?void 0:y.id)===s.id,onClick:()=>O(s),children:[e.jsx(zt,{children:e.jsx(Oe,{size:20})}),e.jsx(At,{primary:s.name,secondary:`${s.type} â€¢ ${s.member_count||"?"} members`}),s.is_monitored&&e.jsx(Fe,{label:"Monitoring",size:"small",color:"success",sx:{ml:2}})]},s.id))}),y&&e.jsxs(e.Fragment,{children:[e.jsx(ga,{sx:{my:2}}),e.jsxs(g,{sx:{mb:2,p:2,bgcolor:"background.paper",borderRadius:2},children:[e.jsxs(f,{variant:"subtitle2",color:"primary",children:["Selected: ",y.name||y.title]}),e.jsxs(f,{variant:"caption",color:"text.secondary",children:["@",y.username||"no-username"]})]}),e.jsx(Ge,{control:e.jsx(fa,{checked:j.createSupplier,onChange:s=>L({...j,createSupplier:s.target.checked})}),label:"Create as Supplier"}),j.createSupplier&&e.jsxs(g,{sx:{mt:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(ne,{label:"Supplier Name",value:j.supplierName,onChange:s=>L({...j,supplierName:s.target.value}),placeholder:(y==null?void 0:y.name)||(y==null?void 0:y.title)||"Supplier name",fullWidth:!0,size:"small"}),e.jsx(ne,{label:"Website (optional)",value:j.supplierWebsite,onChange:s=>L({...j,supplierWebsite:s.target.value}),placeholder:"https://...",fullWidth:!0,size:"small"}),e.jsx(ne,{label:"Contact Email (optional)",value:j.supplierEmail,onChange:s=>L({...j,supplierEmail:s.target.value}),placeholder:"contact@supplier.com",fullWidth:!0,size:"small"}),e.jsx(ne,{label:"Notes (optional)",value:j.supplierNotes,onChange:s=>L({...j,supplierNotes:s.target.value}),placeholder:"Any notes about this supplier...",multiline:!0,rows:2,fullWidth:!0,size:"small"})]})]})]}):e.jsx(f,{color:"text.secondary",textAlign:"center",py:4,children:"No channels found. Make sure you're a member of some Telegram channels or groups."})}),e.jsxs(Bt,{children:[e.jsx(U,{onClick:()=>{J(!1),ee(null),L({createSupplier:!0,supplierName:"",supplierWebsite:"",supplierEmail:"",supplierNotes:""})},children:"Cancel"}),e.jsx(U,{variant:"contained",onClick:()=>ye(),disabled:!y||$("telegram_channels",z.length),children:"Add Channel"})]})]})]})})},yr=()=>{var I,M,re;const[t]=Nt(),a=t.get("tab"),r={profile:0,integrations:1,alerts:2,costs:3,billing:4},d=a&&r[a]!==void 0?r[a]:0,[p,E]=c.useState(d);c.useEffect(()=>{a&&r[a]!==void 0&&E(r[a])},[a,t]);const{profile:T,alertSettings:m,costSettings:x,loading:V,updateProfile:Y,updateAlertSettings:G,updateCostSettings:se}=nr(),{showToast:R}=xt(),{subscription:l,openPortal:D,cancelSubscription:b,reactivateSubscription:z,refreshSubscription:Q}=xa(),P=ba(),[de,ie]=c.useState([]),[J,oe]=c.useState(null),[xe,ce]=c.useState(!1),[ae,y]=c.useState(!1),[ee,j]=c.useState({full_name:"",avatar_url:""}),[L,h]=c.useState({current_password:"",new_password:"",confirm_password:""}),[be,$]=c.useState(""),[q,he]=c.useState(!1),[_e,ke]=c.useState(!1),[N,K]=c.useState({min_roi:20,min_profit:3,max_rank:1e5,alerts_enabled:!0,alert_min_roi:30,alert_channels:["push","email"]}),[O,ye]=c.useState({inbound_rate_per_lb:.35,default_prep_cost:.1});c.useEffect(()=>{T&&j({full_name:T.full_name||"",avatar_url:T.avatar_url||""})},[T]),c.useEffect(()=>{m&&K({min_roi:m.min_roi||20,min_profit:m.min_profit||3,max_rank:m.max_rank||1e5,alerts_enabled:m.alerts_enabled!==!1,alert_min_roi:m.alert_min_roi||30,alert_channels:m.alert_channels||["push","email"]})},[m]),c.useEffect(()=>{x&&ye({inbound_rate_per_lb:x.inbound_rate_per_lb||x.default_inbound_shipping||.35,default_prep_cost:x.default_prep_cost||.1})},[x]),c.useEffect(()=>{p===4&&(async()=>{try{const[w,H]=await Promise.all([W.get("/billing/invoices"),W.get("/billing/usage")]);ie(w.data.invoices||[]),oe(H.data)}catch(w){console.error("Failed to fetch billing data:",w);try{const H=await W.get("/billing/invoices");ie(H.data.invoices||[])}catch(H){console.error("Failed to fetch invoices:",H)}try{const H=await W.get("/billing/usage");oe(H.data)}catch(H){console.error("Failed to fetch usage:",H)}}})()},[p]);const Pe=async()=>{try{const o=await W.get("/billing/usage");oe(o.data)}catch(o){console.error("Failed to fetch usage:",o)}},ve=async(o=!1)=>{var w,H;y(!0);try{o?(await W.post("/billing/cancel-immediately"),R("Subscription cancelled. You've been moved to the Free plan.","info")):(await b(!0),R("Subscription will cancel at end of billing period","info")),ce(!1),await Q(),await Pe()}catch(Z){R(((H=(w=Z.response)==null?void 0:w.data)==null?void 0:H.detail)||"Failed to cancel subscription","error")}finally{y(!1)}},je=async()=>{y(!0);try{await z(),R("Subscription reactivated","success")}catch{R("Failed to reactivate subscription","error")}finally{y(!1)}},Le=async()=>{y(!0);try{await D()}catch{R("Failed to open billing portal","error"),y(!1)}},s=async()=>{try{await Y(ee),R("Profile updated successfully","success")}catch(o){R(o.message||"Failed to update profile","error")}},S=async()=>{try{await G(N),R("Alert settings saved","success")}catch(o){R(o.message||"Failed to save alert settings","error")}},F=async()=>{try{const o={inbound_rate_per_lb:O.inbound_rate_per_lb,default_prep_cost:O.default_prep_cost,default_inbound_shipping:O.inbound_rate_per_lb};await se(o),R("Cost settings saved","success")}catch(o){R(o.message||"Failed to save cost settings","error")}},B=async()=>{if($(""),he(!1),L.new_password!==L.confirm_password){$("New passwords do not match");return}if(L.new_password.length<8){$("Password must be at least 8 characters");return}ke(!0);try{const{data:{user:o}}=await mt.auth.getUser();if(!o)throw new Error("Not authenticated");const{error:w}=await mt.auth.signInWithPassword({email:o.email,password:L.current_password});if(w){$("Current password is incorrect"),R("Current password is incorrect","error");return}const{error:H}=await mt.auth.updateUser({password:L.new_password});if(H)throw H;he(!0),h({current_password:"",new_password:"",confirm_password:""}),R("Password changed successfully","success")}catch(o){$(o.message||"Failed to change password"),R(o.message||"Failed to change password","error")}finally{ke(!1)}};return V?e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(Te,{})}):e.jsxs(g,{children:[e.jsx(f,{variant:"h4",fontWeight:700,mb:4,children:"Settings"}),e.jsxs(Pa,{value:p,onChange:(o,w)=>E(w),sx:{mb:4},children:[e.jsx(Ne,{label:"Profile"}),e.jsx(Ne,{label:"Integrations"}),e.jsx(Ne,{label:"Alerts"}),e.jsx(Ne,{label:"Costs"}),e.jsx(Ne,{label:"Billing"})]}),p===0&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsx(f,{variant:"h6",fontWeight:600,mb:3,children:"Profile Settings"}),e.jsxs(g,{display:"flex",flexDirection:"column",gap:3,children:[e.jsx(ne,{label:"Full Name",value:ee.full_name,onChange:o=>j({...ee,full_name:o.target.value}),fullWidth:!0}),e.jsx(ne,{label:"Avatar URL",value:ee.avatar_url,onChange:o=>j({...ee,avatar_url:o.target.value}),fullWidth:!0,placeholder:"https://..."}),e.jsx(U,{variant:"contained",onClick:s,sx:{backgroundColor:le.purple.main,"&:hover":{backgroundColor:le.purple.dark},alignSelf:"flex-start"},children:"Save Profile"})]})]})}),e.jsx(ge,{sx:{mt:3},children:e.jsxs(fe,{children:[e.jsx(f,{variant:"h6",fontWeight:600,mb:3,children:"Change Password"}),e.jsxs(g,{display:"flex",flexDirection:"column",gap:3,children:[be&&e.jsx(we,{severity:"error",children:be}),q&&e.jsx(we,{severity:"success",children:"Password changed successfully!"}),e.jsx(ne,{label:"Current Password",type:"password",autoComplete:"current-password",value:L.current_password,onChange:o=>h({...L,current_password:o.target.value}),fullWidth:!0,required:!0}),e.jsx(ne,{label:"New Password",type:"password",autoComplete:"new-password",value:L.new_password,onChange:o=>h({...L,new_password:o.target.value}),fullWidth:!0,required:!0,inputProps:{minLength:8},helperText:"Must be at least 8 characters"}),e.jsx(ne,{label:"Confirm New Password",type:"password",autoComplete:"new-password",value:L.confirm_password,onChange:o=>h({...L,confirm_password:o.target.value}),fullWidth:!0,required:!0}),e.jsx(U,{variant:"contained",onClick:B,disabled:_e,sx:{backgroundColor:le.purple.main,"&:hover":{backgroundColor:le.purple.dark},alignSelf:"flex-start"},children:_e?"Changing...":"Change Password"})]})]})})]}),p===1&&e.jsxs(g,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(sr,{}),e.jsx(lr,{})]}),p===2&&e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsx(f,{variant:"h6",fontWeight:600,mb:3,children:"Alert Settings"}),e.jsxs(g,{display:"flex",flexDirection:"column",gap:3,children:[e.jsxs(g,{children:[e.jsx(f,{variant:"body2",color:"text.secondary",mb:1,children:"Minimum ROI for alerts"}),e.jsx(Et,{value:N.alert_min_roi,onChange:(o,w)=>K({...N,alert_min_roi:w}),min:0,max:100,valueLabelDisplay:"auto",valueLabelFormat:o=>`${o}%`})]}),e.jsxs(g,{children:[e.jsx(f,{variant:"body2",color:"text.secondary",mb:1,children:"Minimum ROI to consider profitable"}),e.jsx(Et,{value:N.min_roi,onChange:(o,w)=>K({...N,min_roi:w}),min:0,max:100,valueLabelDisplay:"auto",valueLabelFormat:o=>`${o}%`})]}),e.jsx(ne,{label:"Minimum profit per unit",type:"number",value:N.min_profit,onChange:o=>K({...N,min_profit:parseFloat(o.target.value)||0}),InputProps:{startAdornment:"$"},fullWidth:!0}),e.jsx(ne,{label:"Maximum sales rank",type:"number",value:N.max_rank,onChange:o=>K({...N,max_rank:parseInt(o.target.value)||0}),fullWidth:!0}),e.jsx(Ge,{control:e.jsx(gt,{checked:N.alerts_enabled,onChange:o=>K({...N,alerts_enabled:o.target.checked})}),label:"Enable alerts"}),e.jsxs(g,{children:[e.jsx(f,{variant:"body2",color:"text.secondary",mb:1,children:"Notification Channels"}),e.jsx(Ge,{control:e.jsx(gt,{checked:(I=N.alert_channels)==null?void 0:I.includes("push"),onChange:o=>{const w=N.alert_channels||[];o.target.checked?K({...N,alert_channels:[...w,"push"]}):K({...N,alert_channels:w.filter(H=>H!=="push")})}}),label:"Push notifications"}),e.jsx(Ge,{control:e.jsx(gt,{checked:(M=N.alert_channels)==null?void 0:M.includes("email"),onChange:o=>{const w=N.alert_channels||[];o.target.checked?K({...N,alert_channels:[...w,"email"]}):K({...N,alert_channels:w.filter(H=>H!=="email")})}}),label:"Email alerts"})]}),e.jsx(U,{variant:"contained",onClick:S,sx:{backgroundColor:le.purple.main,"&:hover":{backgroundColor:le.purple.dark},alignSelf:"flex-start"},children:"Save Settings"})]})]})}),p===3&&e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsx(f,{variant:"h6",fontWeight:600,mb:1,children:"ðŸ“¦ Shipping & Prep Costs"}),e.jsx(f,{variant:"body2",color:"text.secondary",mb:3,children:"These costs are included in all profit calculations"}),e.jsxs(g,{display:"flex",flexDirection:"column",gap:3,children:[e.jsx(ne,{label:"Inbound Shipping Rate",type:"number",step:"0.01",value:O.inbound_rate_per_lb,onChange:o=>ye({...O,inbound_rate_per_lb:parseFloat(o.target.value)||0}),InputProps:{startAdornment:e.jsx(InputAdornment,{position:"start",children:"$"}),endAdornment:e.jsx(InputAdornment,{position:"end",children:"/lb"})},fullWidth:!0,helperText:"Cost to ship TO Amazon (typical: $0.30-0.50/lb)"}),e.jsx(ne,{label:"Default Prep Cost",type:"number",step:"0.01",value:O.default_prep_cost,onChange:o=>ye({...O,default_prep_cost:parseFloat(o.target.value)||0}),InputProps:{startAdornment:e.jsx(InputAdornment,{position:"start",children:"$"}),endAdornment:e.jsx(InputAdornment,{position:"end",children:"/unit"})},fullWidth:!0,helperText:"Labeling, poly bags, etc. (typical: $0.10-0.30)"}),e.jsx(U,{variant:"contained",onClick:F,sx:{backgroundColor:le.purple.main,"&:hover":{backgroundColor:le.purple.dark},alignSelf:"flex-start"},children:"Save Cost Settings"})]})]})}),p===4&&e.jsxs(g,{display:"flex",flexDirection:"column",gap:3,children:[e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[e.jsxs(g,{children:[e.jsx(f,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Current Plan"}),e.jsxs(g,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Fe,{label:((re=l==null?void 0:l.tier)==null?void 0:re.toUpperCase())||"FREE",color:(l==null?void 0:l.tier)==="free"?"default":"primary",sx:{fontWeight:600}}),(l==null?void 0:l.cancel_at_period_end)&&e.jsx(Fe,{label:"Cancels at period end",color:"warning",size:"small"})]}),(l==null?void 0:l.status)==="trialing"&&(l==null?void 0:l.trial_end)&&e.jsxs(we,{severity:"info",sx:{mt:1,mb:1},children:["ðŸŽ‰ Free trial ends ",new Date(l.trial_end).toLocaleDateString()]}),(l==null?void 0:l.current_period_end)&&(l==null?void 0:l.status)!=="trialing"&&e.jsxs(f,{variant:"body2",color:"text.secondary",children:["Renews: ",new Date(l.current_period_end).toLocaleDateString()]}),(l==null?void 0:l.cancel_at_period_end)&&e.jsxs(we,{severity:"warning",sx:{mt:1},children:["âš ï¸ Cancels on ",l!=null&&l.current_period_end?new Date(l.current_period_end).toLocaleDateString():"period end"]})]}),e.jsxs(g,{display:"flex",gap:1,children:[l!=null&&l.cancel_at_period_end?e.jsx(U,{variant:"outlined",onClick:je,disabled:ae,children:"Reactivate"}):(l==null?void 0:l.tier)!=="free"?e.jsx(U,{variant:"outlined",color:"error",onClick:()=>ce(!0),disabled:ae,children:"Cancel"}):null,e.jsx(U,{variant:"contained",onClick:()=>P("/pricing"),sx:{backgroundColor:le.purple.main,"&:hover":{backgroundColor:le.purple.dark}},children:(l==null?void 0:l.tier)==="free"?"Upgrade":"Change Plan"})]})]}),(l==null?void 0:l.tier)!=="free"&&e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ya,{size:18}),onClick:Le,disabled:ae,sx:{mt:2},children:"Manage Billing & Payment Methods"})]})}),J&&e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsx(f,{variant:"h6",fontWeight:600,mb:2,children:"Usage This Period"}),e.jsxs(g,{mb:2,children:[e.jsxs(g,{display:"flex",justifyContent:"space-between",mb:1,children:[e.jsx(f,{variant:"body2",color:"text.secondary",children:"Analyses"}),e.jsxs(f,{variant:"body2",fontWeight:600,children:[J.analyses.used," / ",J.analyses.unlimited?"âˆž":J.analyses.limit]})]}),!J.analyses.unlimited&&e.jsx(va,{variant:"determinate",value:Math.min(J.analyses.used/J.analyses.limit*100,100),sx:{height:8,borderRadius:4,backgroundColor:le.gray[200],"& .MuiLinearProgress-bar":{backgroundColor:J.analyses.used>=J.analyses.limit*.9?le.error.main:le.purple.main}}})]})]})}),e.jsx(ge,{children:e.jsxs(fe,{children:[e.jsx(f,{variant:"h6",fontWeight:600,mb:2,children:"Invoice History"}),de.length===0?e.jsx(f,{variant:"body2",color:"text.secondary",children:"No invoices yet"}):e.jsx(La,{size:"small",children:e.jsx(Aa,{children:de.map(o=>e.jsxs(Ta,{children:[e.jsx(Be,{children:e.jsx(f,{variant:"body2",fontWeight:600,children:new Date(o.created_at).toLocaleDateString()})}),e.jsx(Be,{children:e.jsx(f,{variant:"body2",color:"text.secondary",children:ja((o.amount_paid||o.amount_due||0)/100)})}),e.jsx(Be,{children:e.jsx(Fe,{label:o.status,size:"small",color:o.status==="paid"?"success":"default"})}),e.jsx(Be,{align:"right",children:o.stripe_invoice_url&&e.jsx(U,{size:"small",startIcon:e.jsx(za,{size:14}),href:o.stripe_invoice_url,target:"_blank",children:"View"})})]},o.id))})})]})}),e.jsxs(Wt,{open:xe,onClose:()=>ce(!1),children:[e.jsx(Vt,{children:"Cancel Subscription?"}),e.jsx(Ot,{children:(l==null?void 0:l.status)==="trialing"?e.jsxs(e.Fragment,{children:[e.jsx(we,{severity:"warning",sx:{mb:2},children:"Your trial will end immediately and you'll be downgraded to the Free plan."}),e.jsx(f,{variant:"body2",color:"text.secondary",children:"You can resubscribe anytime, but won't be eligible for another free trial."})]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{severity:"warning",sx:{mb:2},children:"Your subscription will remain active until the end of your current billing period. You'll continue to have access to all features until then."}),e.jsx(f,{variant:"body2",color:"text.secondary",children:"After cancellation, you'll be moved to the Free plan. You can reactivate anytime."})]})}),e.jsxs(Bt,{children:[e.jsx(U,{onClick:()=>ce(!1),children:"Keep Subscription"}),e.jsx(U,{onClick:()=>ve((l==null?void 0:l.status)==="trialing"),color:"error",variant:"contained",disabled:ae,children:ae?"Canceling...":"Yes, Cancel"})]})]})]})]})};export{yr as default};
