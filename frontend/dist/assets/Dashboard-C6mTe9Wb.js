import{c as D,j as e,C as u,b as j,B as n,T as t,e as f,d as A,h as i,A as C,P as W,f as m,g as U,I as w,u as B,i as E,k as S,l as P,D as T,a as L,m as G,n as N,r as F}from"./index-DJeRhYJi.js";import{T as R}from"./trending-down-Z2kmSEDe.js";import{E as M}from"./external-link-DArXF2mN.js";import{S as H}from"./star-CwQifiq8.js";import{G as d}from"./Grid-C_9WyS1p.js";import{I as O}from"./inbox-BUfvwKN1.js";import{C as q}from"./check-circle-CDhjJ7dE.js";import{C as V}from"./clock-ZgJdUFyN.js";import{D as Y}from"./dollar-sign-CRcgrrIV.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=D("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=D("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),p=({icon:s,label:o,value:a,subtext:x,trend:h,trendUp:l})=>e.jsx(u,{sx:{height:"100%"},children:e.jsxs(j,{children:[e.jsxs(n,{display:"flex",alignItems:"center",gap:1,mb:2,children:[s,e.jsx(t,{variant:"body2",color:"text.secondary",children:o})]}),e.jsx(t,{variant:"h3",fontWeight:700,color:"text.primary",mb:1,children:a}),e.jsxs(n,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:x}),h&&e.jsxs(n,{display:"flex",alignItems:"center",gap:.5,color:l?"success.main":"error.main",children:[l?e.jsx(f,{size:14}):e.jsx(R,{size:14}),e.jsx(t,{variant:"body2",fontWeight:600,children:h})]})]})]})}),K=({status:s})=>{const a=(()=>{switch(s){case"ungated":return{label:"Ungated",icon:e.jsx(J,{size:12}),color:i.success.main,bgColor:i.success.light};case"gated":return{label:"Gated",icon:e.jsx($,{size:12}),color:i.error.main,bgColor:i.error.light};case"approval_required":return{label:"Approval Needed",icon:e.jsx(C,{size:12}),color:i.warning.main,bgColor:i.warning.light};case"amazon_restricted":return{label:"Amazon Selling",icon:e.jsx(C,{size:12}),color:i.warning.main,bgColor:i.warning.light};default:return{label:"Unknown",icon:null,color:i.gray[500],bgColor:i.gray[100]}}})();return e.jsx(A,{label:a.label,icon:a.icon,size:"small",sx:{backgroundColor:a.bgColor,color:a.color,fontWeight:500,fontSize:"0.75rem","& .MuiChip-icon":{color:a.color}}})},Q=({deal:s,onView:o,onMessage:a,onSave:x,onDismiss:h})=>{const l=s.roi>=30;return e.jsx(u,{sx:{p:0,overflow:"hidden",transition:"all 0.2s ease",cursor:"pointer","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)",borderColor:"#7C3AED"}},onClick:()=>o&&o(s),children:e.jsxs(n,{sx:{display:"flex"},children:[e.jsx(n,{sx:{width:120,minHeight:120,bgcolor:"#252540",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.title||s.asin,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(W,{size:40,style:{color:"#8B8B9B"}})}),e.jsxs(n,{sx:{flex:1,p:2},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(t,{variant:"body2",color:"text.secondary",fontFamily:"monospace",children:s.asin}),e.jsx(K,{status:s.gating_status})]}),e.jsx(t,{variant:"body1",fontWeight:"600",color:"white",noWrap:!0,mb:1,children:s.title||"Untitled Product"}),e.jsxs(n,{sx:{display:"flex",gap:3},children:[e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"Buy"}),e.jsx(t,{variant:"body2",fontWeight:"600",color:"white",children:m(s.buy_cost)})]}),e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"Sell"}),e.jsx(t,{variant:"body2",fontWeight:"600",color:"white",children:m(s.sell_price)})]}),e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"Profit"}),e.jsx(t,{variant:"body2",fontWeight:"600",color:"success.main",children:m(s.net_profit)})]}),e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"ROI"}),e.jsxs(t,{variant:"body2",fontWeight:"700",sx:{color:l?"#10B981":"#F59E0B",display:"flex",alignItems:"center",gap:.5},children:[l&&e.jsx(f,{size:14}),U(s.roi)]})]})]})]}),e.jsxs(n,{sx:{p:2,display:"flex",flexDirection:"column",gap:1,borderLeft:"1px solid #2D2D3D"},children:[e.jsx(w,{size:"small",sx:{color:"#A0A0B0","&:hover":{color:"#7C3AED"}},onClick:c=>{c.stopPropagation(),window.open(`https://www.amazon.com/dp/${s.asin}`,"_blank")},children:e.jsx(M,{size:18})}),x&&e.jsx(w,{size:"small",sx:{color:"#A0A0B0","&:hover":{color:"#7C3AED"}},onClick:c=>{c.stopPropagation(),x(s)},children:e.jsx(H,{size:18})})]})]})})},X=()=>{const s=B(),{subscription:o}=E(),{tier:a,getLimit:x,getUpgradeSuggestion:h}=S(),l=h(),c={used:(o==null?void 0:o.analyses_used)||0,limit:x("analyses_per_month")};return e.jsx(u,{children:e.jsxs(j,{children:[e.jsxs(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(t,{variant:"h6",fontWeight:600,children:"Usage"}),e.jsx(t,{variant:"caption",sx:{px:1.5,py:.5,bgcolor:i.purple.lighter,borderRadius:1,color:i.purple.main,fontWeight:600,textTransform:"uppercase"},children:a})]}),e.jsx(n,{sx:{"& > *:not(:last-child)":{mb:2}},children:e.jsx(P,{label:"Analyses This Month",used:c.used,limit:c.limit})}),l&&e.jsxs(e.Fragment,{children:[e.jsx(T,{sx:{my:2}}),e.jsxs(n,{sx:{p:1.5,bgcolor:i.gray[100],borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(n,{children:[e.jsx(t,{variant:"body2",fontWeight:600,children:"Need more?"}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:["Upgrade to ",l.name]})]}),e.jsx(L,{size:"small",variant:"outlined",startIcon:e.jsx(f,{size:16}),onClick:()=>s("/pricing"),sx:{borderColor:i.purple.main,color:i.purple.main,"&:hover":{borderColor:i.purple.dark,backgroundColor:i.purple.lighter}},children:"Upgrade"})]})]})]})})},le=()=>{var b,v;const{user:s}=G(),{deals:o,loading:a}=N({limit:50}),[x,h]=F.useState(null),l=o.filter(r=>r.status==="pending"||r.status==="analyzed").length,c=o.filter(r=>r.is_profitable&&r.roi>=20).length,z=o.filter(r=>r.status==="pending").length,k=o.filter(r=>r.is_profitable&&r.net_profit>0).reduce((r,g)=>r+g.net_profit*(g.moq||1),0),y=o.filter(r=>r.is_profitable&&r.roi>=30).sort((r,g)=>(g.roi||0)-(r.roi||0)).slice(0,3),I=()=>{const r=new Date().getHours();return r<12?"Good morning":r<18?"Good afternoon":"Good evening"},_=((b=s==null?void 0:s.user_metadata)==null?void 0:b.full_name)||((v=s==null?void 0:s.email)==null?void 0:v.split("@")[0])||"there";return e.jsxs(n,{children:[e.jsxs(n,{mb:4,children:[e.jsxs(t,{variant:"h4",fontWeight:700,mb:1,children:[I(),", ",_,"! ðŸ‘‹"]}),e.jsx(t,{variant:"body1",color:"text.secondary",children:"Here's your deal flow for today."})]}),e.jsxs(d,{container:!0,spacing:3,mb:4,children:[e.jsx(d,{item:!0,xs:12,sm:6,md:3,children:e.jsx(p,{icon:e.jsx(O,{size:16}),label:"NEW DEALS",value:l,subtext:"today",trend:"23%",trendUp:!0})}),e.jsx(d,{item:!0,xs:12,sm:6,md:3,children:e.jsx(p,{icon:e.jsx(q,{size:16}),label:"PROFITABLE",value:c,subtext:"ready to buy",trend:"8%",trendUp:!0})}),e.jsx(d,{item:!0,xs:12,sm:6,md:3,children:e.jsx(p,{icon:e.jsx(V,{size:16}),label:"PENDING",value:z,subtext:"need review",trend:"12%",trendUp:!1})}),e.jsx(d,{item:!0,xs:12,sm:6,md:3,children:e.jsx(p,{icon:e.jsx(Y,{size:16}),label:"POTENTIAL",value:m(k),subtext:"est. profit",trend:"15%",trendUp:!0})})]}),e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,md:8,children:e.jsx(u,{children:e.jsxs(j,{children:[e.jsx(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:e.jsx(t,{variant:"h6",fontWeight:600,children:"ðŸ”¥ Hot Deals"})}),a?e.jsx(t,{children:"Loading..."}):y.length>0?e.jsx(n,{display:"flex",flexDirection:"column",gap:2,children:y.map(r=>e.jsx(Q,{deal:r,onView:g=>h(g)},r.id))}):e.jsx(t,{color:"text.secondary",children:"No hot deals yet"})]})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(X,{})})]})]})};export{le as default};
