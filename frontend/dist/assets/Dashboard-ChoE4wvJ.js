import{c as A,j as e,C as f,b as y,B as n,T as t,e as b,d as W,h as o,A as D,P as S,f as j,g as U,I as z,S as B,u as E,i as P,k as T,l as L,D as G,a as N,m as F,n as R,r as M}from"./index-D5Lu9gvQ.js";import{T as H}from"./trending-down-CP6--zD2.js";import{E as O}from"./external-link-DKqSwrhW.js";import{G as c}from"./Grid-DPuG7YDF.js";import{I as q}from"./inbox-Bb43WUga.js";import{C as V}from"./check-circle-DwNv_QXB.js";import{C as Y}from"./clock-CZH3VvAN.js";import{D as $}from"./dollar-sign-DurImJFQ.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=A("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=A("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),u=({icon:r,label:i,value:l,subtext:d,trend:x,trendUp:a})=>e.jsx(f,{sx:{height:"100%"},children:e.jsxs(y,{children:[e.jsxs(n,{display:"flex",alignItems:"center",gap:1,mb:2,children:[r,e.jsx(t,{variant:"body2",color:"text.secondary",children:i})]}),e.jsx(t,{variant:"h3",fontWeight:700,color:"text.primary",mb:1,children:l}),e.jsxs(n,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:d}),x&&e.jsxs(n,{display:"flex",alignItems:"center",gap:.5,color:a?"success.main":"error.main",children:[a?e.jsx(b,{size:14}):e.jsx(H,{size:14}),e.jsx(t,{variant:"body2",fontWeight:600,children:x})]})]})]})}),Q=({status:r})=>{const l=(()=>{switch(r){case"ungated":return{label:"Ungated",icon:e.jsx(K,{size:12}),color:o.success.main,bgColor:o.success.light};case"gated":return{label:"Gated",icon:e.jsx(J,{size:12}),color:o.error.main,bgColor:o.error.light};case"approval_required":return{label:"Approval Needed",icon:e.jsx(D,{size:12}),color:o.warning.main,bgColor:o.warning.light};case"amazon_restricted":return{label:"Amazon Selling",icon:e.jsx(D,{size:12}),color:o.warning.main,bgColor:o.warning.light};default:return{label:"Unknown",icon:null,color:o.gray[500],bgColor:o.gray[100]}}})();return e.jsx(W,{label:l.label,icon:l.icon,size:"small",sx:{backgroundColor:l.bgColor,color:l.color,fontWeight:500,fontSize:"0.75rem","& .MuiChip-icon":{color:l.color}}})},X=({deal:r,onView:i,onMessage:l,onSave:d,onDismiss:x})=>{if(!r)return null;const a=(r.roi||0)>=30;return e.jsx(f,{sx:{p:0,overflow:"hidden",transition:"all 0.2s ease",cursor:"pointer","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)",borderColor:"#7C3AED"}},onClick:()=>i&&i(r),children:e.jsxs(n,{sx:{display:"flex"},children:[e.jsx(n,{sx:{width:120,minHeight:120,bgcolor:"background.paper",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.image_url?e.jsx("img",{src:r.image_url,alt:r.title||r.asin,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(S,{size:40,style:{color:"#8B8B9B"}})}),e.jsxs(n,{sx:{flex:1,p:2},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(t,{variant:"body2",color:"text.secondary",fontFamily:"monospace",children:r.asin}),e.jsx(Q,{status:r.gating_status})]}),e.jsx(t,{variant:"body1",fontWeight:"600",color:"white",noWrap:!0,mb:1,children:r.title||"Untitled Product"}),e.jsxs(n,{sx:{display:"flex",gap:3},children:[e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"Buy"}),e.jsx(t,{variant:"body2",fontWeight:"600",color:"white",children:j(r.buy_cost||0)})]}),e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"Sell"}),e.jsx(t,{variant:"body2",fontWeight:"600",color:"white",children:j(r.sell_price||0)})]}),e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"Profit"}),e.jsx(t,{variant:"body2",fontWeight:"600",color:"success.main",children:j(r.net_profit||0)})]}),e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"ROI"}),e.jsxs(t,{variant:"body2",fontWeight:"700",sx:{color:a?"#10B981":"#F59E0B",display:"flex",alignItems:"center",gap:.5},children:[a&&e.jsx(b,{size:14}),U(r.roi||0)]})]})]})]}),e.jsxs(n,{sx:{p:2,display:"flex",flexDirection:"column",gap:1,borderLeft:"1px solid #2D2D3D"},children:[e.jsx(z,{size:"small",sx:{color:"#A0A0B0","&:hover":{color:"#7C3AED"}},onClick:h=>{h.stopPropagation(),window.open(`https://www.amazon.com/dp/${r.asin}`,"_blank")},children:e.jsx(O,{size:18})}),d&&e.jsx(z,{size:"small",sx:{color:"#A0A0B0","&:hover":{color:"#7C3AED"}},onClick:h=>{h.stopPropagation(),d(r)},children:e.jsx(B,{size:18})})]})]})})},Z=()=>{const r=E(),{subscription:i}=P(),{tierDisplay:l,isSuperAdmin:d,getLimit:x,getUpgradeSuggestion:a}=T(),h=d?"Super Admin":l,g=a(),m={used:(i==null?void 0:i.analyses_used)||0,limit:x("analyses_per_month")};return e.jsx(f,{children:e.jsxs(y,{children:[e.jsxs(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(t,{variant:"h6",fontWeight:600,children:"Usage"}),e.jsx(t,{variant:"caption",sx:{px:1.5,py:.5,bgcolor:o.purple.lighter,borderRadius:1,color:o.purple.main,fontWeight:600,textTransform:"uppercase"},children:h})]}),e.jsx(n,{sx:{"& > *:not(:last-child)":{mb:2}},children:e.jsx(L,{label:"Analyses This Month",used:m.used,limit:m.limit})}),g&&e.jsxs(e.Fragment,{children:[e.jsx(G,{sx:{my:2}}),e.jsxs(n,{sx:{p:1.5,bgcolor:o.gray[100],borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(n,{children:[e.jsx(t,{variant:"body2",fontWeight:600,children:"Need more?"}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:["Upgrade to ",g.name]})]}),e.jsx(N,{size:"small",variant:"outlined",startIcon:e.jsx(b,{size:16}),onClick:()=>r("/pricing"),sx:{borderColor:o.purple.main,color:o.purple.main,"&:hover":{borderColor:o.purple.dark,backgroundColor:o.purple.lighter}},children:"Upgrade"})]})]})]})})},le=()=>{var C,w;const{user:r}=F(),{deals:i,loading:l}=R({limit:50}),[d,x]=M.useState(null),a=Array.isArray(i)?i:Array.isArray(i==null?void 0:i.deals)?i.deals:Array.isArray(i==null?void 0:i.data)?i.data:[],h=a.filter(s=>s.status==="pending"||s.status==="analyzed").length,g=a.filter(s=>s.is_profitable&&s.roi>=20).length,m=a.filter(s=>s.status==="pending").length,k=a.filter(s=>s.is_profitable&&s.net_profit>0).reduce((s,p)=>s+p.net_profit*(p.moq||1),0),v=a.filter(s=>s.is_profitable&&s.roi>=30).sort((s,p)=>(p.roi||0)-(s.roi||0)).slice(0,3),I=()=>{const s=new Date().getHours();return s<12?"Good morning":s<18?"Good afternoon":"Good evening"},_=((C=r==null?void 0:r.user_metadata)==null?void 0:C.full_name)||((w=r==null?void 0:r.email)==null?void 0:w.split("@")[0])||"there";return e.jsxs(n,{children:[e.jsxs(n,{mb:4,children:[e.jsxs(t,{variant:"h4",fontWeight:700,mb:1,sx:{color:"#1a1a2e"},children:[I(),", ",_,"! ðŸ‘‹"]}),e.jsx(t,{variant:"body1",sx:{color:"#666666"},children:"Here's your deal flow for today."})]}),e.jsxs(c,{container:!0,spacing:3,mb:4,children:[e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{icon:e.jsx(q,{size:16}),label:"NEW DEALS",value:h,subtext:"today",trend:"23%",trendUp:!0})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{icon:e.jsx(V,{size:16}),label:"PROFITABLE",value:g,subtext:"ready to buy",trend:"8%",trendUp:!0})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{icon:e.jsx(Y,{size:16}),label:"PENDING",value:m,subtext:"need review",trend:"12%",trendUp:!1})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{icon:e.jsx($,{size:16}),label:"POTENTIAL",value:j(k),subtext:"est. profit",trend:"15%",trendUp:!0})})]}),e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,md:8,children:e.jsx(f,{children:e.jsxs(y,{children:[e.jsx(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:e.jsx(t,{variant:"h6",fontWeight:600,children:"ðŸ”¥ Hot Deals"})}),l?e.jsx(t,{children:"Loading..."}):v.length>0?e.jsx(n,{display:"flex",flexDirection:"column",gap:2,children:v.map(s=>e.jsx(X,{deal:s,onView:p=>x(p)},s.id))}):e.jsx(t,{color:"text.secondary",children:"No hot deals yet"})]})})}),e.jsx(c,{item:!0,xs:12,md:4,children:e.jsx(Z,{})})]})]})};export{le as default};
